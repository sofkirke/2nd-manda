<!DOCTYPE html>
<html>
<head>
  <title>Search Form</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

  <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="css/style.css">
</head>

<header class="top">
    <nav class="flex-nav">
      
      <div class="nav-left">
        <a href="index.html"><img src="img/logo.png" alt="logo"></a>
        <a href="index.html"> <h3>BusinessBook</h3></a>
      </div>


      <div class="nav-right">
        <a href="#" class="toggleNav"><i class="fa fa-bars" aria-hidden="true"></i> Menu</a>
        <!--<ul>-->
          <!--<li class="registerUser"><a href="register.html">Register</a></li>-->
          <!--<li class="LogIn"><a href="login.html">Login</a></li>-->
          <!--<li><span class="showUserName">Welcome {{ Peter! }}</span></li>-->
          <!--<li class="profilePage"><a href="profile.html">Your profile</a></li>-->
          <!--<li class="logOut"><a href="logout.html">Log out</a></li>-->
          <!--&lt;!&ndash; <li><a href="#">Change to personal mode</a></li> &ndash;&gt;-->
        <!--</ul>-->
      </div>
    </nav>
  </header>

    

<body>
  <div class="cover-index">

    <div class="search-bar">

      <div  class="flex-form">
        <!--<input type="search" id="departure" placeholder="{{Destination}}">-->
        <!--<input type="search" id="destination" placeholder="Departure">-->
        <!---->
        <!--<label for="from">From</label>-->
        <!--<input type="date" id="fromDate" max="2025-11-01" min="2017-04-19" name="from">-->

        <!--<label for="from">To</label>-->
        <!--<input type="date" id="toDate" max="2025-11-01" min="2017-04-19" name="to">-->

        <!--&lt;!&ndash; <label for="people">Passengers</label>-->
        <!--<input type="number" min="1" max="10" value="1" name="people"> &ndash;&gt;-->

        <!--<input class="searchBtn" type="submit" onclick="save()" value="Search">-->
      </div>
      
      <form class="flex-checks">
        <input type="checkbox" id="oneWay" name="check1" >One-way Trip<br>
        <input type="checkbox" id="returnTrip" name="check2" >Return Trip<br>
        <input type="checkbox" id="directFlight" name="check2" >Direct Flight Preferred<br>
      </form>

    </div>
  </div>

  <div class="suggested-travels">
    <h2>Suggested travels</h2>
    <div class="sugg-travels">
      
      <div class="sugg london">
        <h3>PARIS</h3>
        <p>3 April - 8 April</p>
      </div>

      <div class="sugg newYork">
        <h3>NEW YORK</h3>
        <p>8 May - 20 May</p>
      </div>

      <div class="sugg tokyo">
        <h3>TOKYO</h3>
        <p>18 June - 23 June</p>
      </div>
    
    </div>
  </div>

  <!-- <div class="suggestions-calendar">
    <h2>Suggestions based on your calendar</h2>
    <div class="calendar-sugg">

      <div class="cale paris">
        <h3>PARIS</h3>
        <p>Your meeting is the 3rd of May - 11 pm </p>
        <p>We suggest:</p>
        <p>1 May to 5 May</p>
      </div>

      <div class="cale malmo">
        <h3>MALMO</h3>
        <p>Your meeting is the 25th of July - 10 pm </p>
        <p>We suggest:</p>
        <p>24 July to 26 July</p>
      </div>

    </div>
  </div> -->

  <footer>
    <p>Copyright @Interface Design Gr 9 2017</p>
  </footer>
  
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script>

    $(".toggleNav").click( function(){
      $(".flex-nav ul").toggleClass("open");
    });

    var checkUser = localStorage.getItem("active");

    console.log(checkUser);

    if (checkUser !== "no"){

      var searchTemplate =
        '<input type="search" id="departure" placeholder="{{Departure}}">\
          <input type="search" id="destination" placeholder="{{Destination}}">\
          <label for="from">From</label>\
          <input type="date" id="fromDate" max="2025-11-01" min="2017-04-19" format="dd/mm/yyyy" name="from">\
          <label for="from">To</label>\
          <input type="date" id="toDate" max="2025-11-01" min="2017-04-19" format="dd/mm/yyyy" name="to">\
          <!-- <label for="people">Passengers</label>\
          <input type="number" min="1" max="10" value="1" name="people"> -->\
          <input class="searchBtn" type="submit" onclick="save()" value="Search">';

      var changedSearch = searchTemplate.replace("{{Destination}}", "Destination");
      changedSearch = changedSearch.replace("{{Departure}}", "Departure");

      $(".flex-form").append(changedSearch);


      var changeNameTemplate =
              '<ul>\
                <li class="registerUser"><a href="register.html">Register</a></li>\
                <li class="LogIn"><a href="login.html">Login</a></li>\
                <li><span class="showUserName">Welcome {{name}}!</span></li>\
                <li class="profilePage"><a href="profile.html">Your profile</a></li>\
                <li><a class="logOut" href="logout.html">Log out</a></li>\
                <!-- <li><a href="#">Change to personal mode</a></li> -->\
              </ul>';

      var userName = localStorage.getItem("firstName");

      var changedName = changeNameTemplate.replace("{{name}}", userName);

      $(".nav-right").append(changedName);

      var userStatus = localStorage.getItem("active");

      var newUserStatus = localStorage.getItem("active");
      var answerYes = "yes"

      if(newUserStatus == answerYes){

        $(".registerUser").hide();
        $(".LogIn").hide();
        $(".showUserName").show();
        $(".profilePage").show();
        $(".logOut").show();

      }else{

        $(".registerUser").show();
        $(".LogIn").show();
        $(".showUserName").hide();
        $(".profilePage").hide();
        $(".logOut").hide();
      }

      $(".logOut").click(function () {

        localStorage.setItem("active", "no");
        var newUserStatus = localStorage.getItem("active");
        var answerYes = "yes"

        if(newUserStatus == answerYes){

          $(".registerUser").hide();
          $(".LogIn").hide();
          $(".showUserName").show();
          $(".profilePage").show();
          $(".logOut").show();

        }else{

          $(".registerUser").show();
          $(".LogIn").show();
          $(".showUserName").hide();
          $(".profilePage").hide();
          $(".logOut").hide();
        }

      });

    } else {

      var searchTemplate =
              '<input type="search" id="departure" placeholder="{{Departure}}">\
                <input type="search" id="destination" placeholder="{{Destination}}">\
                <label for="from">From</label>\
                <input type="date" id="fromDate" max="2025-11-01" min="2017-04-19" format="dd/mm/yyyy" name="from">\
                <label for="from">To</label>\
                <input type="date" id="toDate" max="2025-11-01" min="2017-04-19" format="dd/mm/yyyy" name="to">\
                <!-- <label for="people">Passengers</label>\
                <input type="number" min="1" max="10" value="1" name="people"> -->\
                <input class="searchBtn" type="submit" onclick="save()" value="Search">';

      var changedSearch = searchTemplate.replace("{{Destination}}", "Destination");
      changedSearch = changedSearch.replace("{{Departure}}", "Departure");

      $(".flex-form").append(changedSearch);

      var changeNameTemplate =
              '<ul>\
                <li class="registerUser"><a href="register.html">Register</a></li>\
                <li class="LogIn"><a href="login.html">Login</a></li>\
                <li><span class="showUserName">Welcome {{name}}!</span></li>\
                <li class="profilePage"><a href="profile.html">Your profile</a></li>\
                <li><a class="logOut" href="logout.html">Log out</a></li>\
                <!-- <li><a href="#">Change to personal mode</a></li> -->\
              </ul>';

      var userName = localStorage.getItem("firstName");

      var changedName = changeNameTemplate.replace("{{name}}", userName);

      $(".nav-right").append(changedName);

      $(".registerUser").show();
      $(".LogIn").show();
      $(".showUserName").hide();
      $(".profilePage").hide();
      $(".logOut").hide();
    }

    function save() {

      	var inputs = $('input, textarea, select')
                .not(':input[type=button], :input[type=submit], :input[type=reset]');

        $(inputs).each(function(){
            var id = $(this).attr('id');
            var value = $(this).val();
            localStorage.setItem(id, value);
        });

        document.location = "result.html";
    };

  </script>
</body>
</html>
